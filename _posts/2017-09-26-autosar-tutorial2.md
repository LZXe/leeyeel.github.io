---
layout: post
title:  "AUTOSAR框架介绍（二）" 
date:   2017-09-26 00:29:54
categories: 新学习
tags: autosar 
excerpt: 上一部分主要介绍AUTOSAR的构架，下面继续
mathjax: true
---

#### 软件成分

AUTOSAR使用它自身的记号来模型化应用. 一个应用包含一个或多个基于应用层的SWC. 为了让SWC可以与其他SWC交流，
AUTOSAR使用VFB(virtural functional bus). 从SWC的角度来说，SWC所看到的一切均为VFB,而不是依赖于硬件的BSW以及硬件本身。
总体上VFB的实现不仅靠RTE还靠BSW. 两个相互关联的SWC是否在相同的ECU上并不重要，他们都连接在相同的VFB上而且并不需要知道另一个位于何处。

汽车的功能既不能放到一个简单的组分里也不能散播到太多的组分.一个组分除了实际的实现之外往往还伴随着SWC的描述文件。
除其他部分外一个描述文件包括:

* 普通属性
  * 名字
  * 制造商

* 通讯性质
 * PPorts
 * Rports
 * Interfaces

* 内部构造
  * 子成分
  * 连接

* 需求硬件资源
  * 处理时间
  * 调度
  * 内存

#### 端口

SWC有两种端口，PPort 提供在接口中定义的数据，而 RPort 反而需求数据，对于发送者-接受者以及客户-服务器接口,AUTOSAR也存在服务版本。

#### 接口

AUTOSAR提供三种接口类型:客户-服务器,发送者-接受者，以及刻度.

##### 客户-服务器
 客户-服务器 模式非常出名并且被广泛应用. 服务器提供服务同时可能用到一个或多个客户端来执行任务。 AUTOSAR中定义客户-服务器模式很简单的定义为
n:1(n>=0, 1个服务器).调用服务器的操作使用客户端提供的参数来执行需要执行的任务，这些参数类型即既可以是简单型(bool)也可是复杂类型(数组).

当客户端想要调用服务器接口的指令时，必须提供每一个操作指令的参数. 当收到回应时，这个客户端不是好的就是坏的.可能的回复类型有三种:

* 可用的回应,服务器可以执行需求指令并且左右操作接口参数已经被赋值.
* 基础设施错误, 因为总线故障使得通向或者接收服务器的通信出现错误.例如由于客户端的超时导致回应指令永远无法返回客户端。
* 应用错误,有时当执行客户端调用的指令时服务端发生故障.

正如上文中指出的，AUTOSAR只支持n:1的客户-服务端机制. 这意味着任何作为客户端的部分必须有连接到服务器端PPort之一的RPort, 然而这个PPort 
却可以连接到任意数量的RPort. 确认每个回复传输到了正确的客户端的RPort取决于通信的实现. 因为一个组分并没有限制为一个端口或一个端口类型，
一个组分以及相同的组分既可以作为客户端也可以作为服务器.

客户端如何调用服务端存在限制,在同一个客户端的RPort上，相同指令的两个调用是不能同时调用的，必须等到第一个调用收到响应,好的或者坏的那个，
才可以再次调用相同的指令。 在相同RPort上不同操作的同时调用是允许的，但是VFB并不保证调用的次序，
即服务器先看到哪个调用的次序或者收到来自于服务器的次序. 然而VFB必须要使得客户端与之前的调用相对应。

当组分为客户-服务端模式时，他们有自己的图形接口表示方法,如下所示:  
![]({{site.url}}assets/autosar/graphical-c-s.png)

##### 发送者-接收者





